# IOS描述文件签名加密
# 如何获取苹果udid

目前国内有很多获取udid的方法，例如蒲公英 还有其他的网站都提供了获取udid的功能，但是如何通过代码集成获取？我分析过国内的文章，大部分都差不多，基本都是可以伪装验证通过的；如何保证获取的是真正的设备的udid

## 如何获取苹果真正的udid？

baidu 搜索不下千篇的文章，没有一个是安全 或者可以说是的可以安全防止伪装 伪造udid

市面上是如何获取udid？
1、引导用户安装udid描述文件
2、安装描述文件后 手机会向服务器发送 udid imei 机型等信息

但是 怎么知道是真的 还是假的？

## 怎么知道是真的 还是假的？

不好意思 目前市面上暂时没有 目前已经出现很多伪装udid的软件 有通过fiddler软件修改 还各种软件 都是一些撸羊毛的团队在维护 

是不是真的不能防止伪装？

## 是不是真的不能防止伪装？

不 肯定可以 wx
```
wx123aii 这里 你要的来了
```

接下来 我们先来看下 普通的udid获取方式

1.准备一个苹果描述文件 .mobileconfig

```

<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
 
<plist version="1.0">
    <dict>
        <key>PayloadContent</key>
        <dict>
            <key>URL</key>
            <string>http://xxx/app/uuid</string>
            <key>DeviceAttributes</key>
            <array>
                <string>UDID</string>
                <string>IMEI</string>
                <string>ICCID</string>
                <string>VERSION</string>
                <string>PRODUCT</string>
            </array>
        </dict>
        <key>PayloadOrganization</key>
        <string>www.yun-bangshou.com</string>
        <key>PayloadDisplayName</key>
        <string>xxx</string>
        <key>PayloadVersion</key>
        <integer>1</integer>
        <key>PayloadUUID</key>
        <string>8C7AD0B8-3900-44DF-A52F-3C4F92921807</string>
        <key>PayloadIdentifier</key>
        <string>com.yun-bangshou.profile-service</string>
        <key>PayloadDescription</key>
        <string>获取当前iOS设备的UDID号码</string>
        <key>PayloadType</key>
        <string>Profile Service</string>
    </dict>
</plist>

```

2.把文件放到web服务器上

3.引导用户下载文件的链接

4.用户安装后 设备会向http://xxx/app/uuid 发送设备的信息

```
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
  <dict>
    <key>IMEI</key>
    <string>12 123456 123456 7</string>
    <key>PRODUCT</key>
    <string>iPhone4,1</string>
    <key>UDID</key>
    <string>b59769e6c28b73b1195009d4b21cXXXXXXXXXXXX</string>
    <key>VERSION</key>
    <string>9B206</string>
  </dict>
</plist>
```

但是 这就结束了  不还远远不够 这些都不是安全的

## 真正安全的

### 上图了 注意找茬 发现不同之处

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200624083254383.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2FwcGxldWRpZA==,size_16,color_FFFFFF,t_70#pic_center)




这是通过代码实现动态签名 和验证的 ；图中正在注册证书 这一步 就是它和其他实现方式的不同之处；其他的都是只有安装描述文件这一个步骤

